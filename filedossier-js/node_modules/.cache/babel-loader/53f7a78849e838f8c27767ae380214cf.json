{"ast":null,"code":"import _slicedToArray from \"/home/develop01/work/filedossier/filedossier-js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/develop01/work/filedossier/filedossier-js/src/Dossier.js\";\nimport React, { Suspense, useState, useEffect, useRef } from 'react';\nimport { Table, Button, Message, Loader, Icon, Dropdown } from 'semantic-ui-react';\nimport { DefaultApi as DossierApi } from '@ilb/filedossier-api/dist';\nimport DossierResource from './DossierResource';\nimport { useResource } from './ReactHelper';\nconst xhtml = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1 plus calc//EN\\\" \\\"http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg-flat.dtd\\\">\\n<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\\n  <head>\\n    <meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\"/>\\n    <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/oooxhtml/oooxhtml.css\\\"/>\\n    <title></title>\\n    <meta name=\\\"generator\\\" content=\\\"oooxhtml/1.2\\\"/>\\n    <meta name=\\\"AppVersion\\\" content=\\\"12.0000\\\"/>\\n    <meta name=\\\"Company\\\" content=\\\"\\u0411\\u044B\\u0441\\u0442\\u0440\\u043E\\u0411\\u0430\\u043D\\u043A\\\"/>\\n    <meta name=\\\"DocSecurity\\\" content=\\\"0\\\"/>\\n    <meta name=\\\"HeadURL\\\" content=\\\"$HeadURL: https://svn.ilb.ru/repos/treasurydocs/trunk/doc/repo/data/issuancevolume.xhtml $\\\"/>\\n    <meta name=\\\"HyperlinksChanged\\\" content=\\\"false\\\"/>\\n    <meta name=\\\"LinksUpToDate\\\" content=\\\"false\\\"/>\\n    <meta name=\\\"ScaleCrop\\\" content=\\\"false\\\"/>\\n    <meta name=\\\"ShareDoc\\\" content=\\\"false\\\"/>\\n  </head>\\n  <body>\\n    <div class=\\\"container spreadsheet\\\">\\n      <table summary=\\\"\\u041B\\u0438\\u0441\\u04421\\\" id=\\\"list1\\\">\\n        <colgroup>\\n          <col style=\\\"min-width:30.23mm;\\\"/>\\n          <col style=\\\"min-width:32.76mm;\\\"/>\\n        </colgroup>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435</p>\\n          </td>\\n          <td style=\\\"font-size:11pt;\\\">\\n            <p>\\u041E\\u0431\\u044A\\u0435\\u043C \\u0432\\u044B\\u043F\\u0443\\u0441\\u043A\\u0430</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u041A\\u041E\\u0411\\u0420-18</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>500000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u041A\\u041E\\u0411\\u0420-17</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>500000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u041A\\u041E\\u0411\\u0420-20</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>500000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u041A\\u041E\\u0411\\u0420-19</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>500000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u041A\\u041E\\u0411\\u0420-21</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>600000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u0420\\u0421\\u0425\\u0411 \\u0411\\u041E-5\\u0420</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>25000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u0420\\u041D \\u0411\\u0410\\u041D\\u041A1\\u04203</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>5000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u041E\\u0424\\u0417 26223</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>350000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u0413\\u0422\\u041B\\u041A 1P-13</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>10000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u0412\\u042D\\u0411 1P-16</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>20000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u0424\\u043E\\u043B\\u043A\\u0441\\u0432\\u04111P3</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>10000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u0422\\u043E\\u0439\\u043E\\u0442\\u0430\\u04111P2</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>3000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:5.29mm;\\\">\\n          <td>\\n            <p>\\u0414\\u041E\\u041C 1P-5R</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>10000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u0412\\u042D\\u0411.\\u0420\\u0424 21</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>15000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u0412\\u042D\\u0411 \\u041F\\u0411\\u041E1\\u04202</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>15000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u0413\\u041F\\u0411001P09P</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>15000000</p>\\n          </td>\\n        </tr>\\n        <tr style=\\\"height:4.99mm;\\\">\\n          <td>\\n            <p>\\u0420\\u041D \\u0411\\u0410\\u041D\\u041A1\\u04205</p>\\n          </td>\\n          <td class=\\\"float\\\" style=\\\"font-size:11pt;\\\">\\n            <p>8000000</p>\\n          </td>\\n        </tr>\\n      </table>\\n    </div>\\n    <script type=\\\"text/javascript\\\" src=\\\"/privilegedAPI/web/scripts/privilegedAPI.js\\\"></script>\\n    <script type=\\\"text/javascript\\\" src=\\\"/oooxhtml/oooxhtml.js\\\"></script>\\n  </body>\\n</html>\\n\";\nconst options = [];\nconst parser = new DOMParser();\nconst list = parser.parseFromString(xhtml, \"application/xhtml+xml\").getElementById(\"list1\");\nconsole.log('list', list);\nconst rows = list.querySelectorAll('tr');\nconsole.log('rows', rows);\n\nfor (let i = 1; i < rows.length; i++) {\n  const cells = rows[i].querySelectorAll('td');\n  options.push({\n    key: cells[0].textContent.trim(),\n    text: cells[0].textContent.trim(),\n    value: cells[0].textContent.trim()\n  });\n}\n\nconsole.log('options', options);\n\nfunction Dossier({\n  dossierKey,\n  dossierPackage,\n  dossierCode\n}) {\n  const dossierApi = new DossierApi();\n  const dossierResource = new DossierResource(dossierApi, {\n    dossierKey,\n    dossierPackage,\n    dossierCode\n  });\n\n  const _useResource = useResource(() => dossierResource.getDossier()),\n        _useResource2 = _slicedToArray(_useResource, 2),\n        dossier = _useResource2[0],\n        getDossier = _useResource2[1];\n\n  useEffect(() => {\n    getDossier();\n  }, [dossierKey, dossierPackage, dossierCode]);\n  console.log('dossier.value', dossier.value);\n  return React.createElement(\"div\", {\n    className: \"fileDosser\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, React.createElement(Dropdown, {\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }), dossier.loading && React.createElement(Loader, {\n    active: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }), dossier.error && React.createElement(Message, {\n    error: true,\n    visible: true,\n    content: dossier.error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }), dossier.value && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, \"Name: \", dossier.value.name, !dossier.value.valid && React.createElement(Message, {\n    negative: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, \"\\u0412\\u0430\\u043B\\u0438\\u0434\\u043D\\u043E\\u0441\\u0442\\u044C: \", dossier.value.valid)), dossier.value.dossierFile && React.createElement(Table, {\n    celled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, React.createElement(Table.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, React.createElement(Table.Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, \"\\u0424\\u0430\\u0439\\u043B\"), React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"))), React.createElement(Table.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, dossier.value.dossierFile.map(file => React.createElement(DossierFile, {\n    key: file.code,\n    file: file,\n    onChange: getDossier,\n    resource: dossierResource.getDossierFileResource(file.code),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }))))));\n}\n\nvar booleanValue = 1;\n\nfunction someFunction() {\n  if (booleanValue === 1) {\n    return 2;\n  }\n}\n\nfunction DossierFile({\n  file,\n  onChange,\n  resource\n}) {\n  console.log('file', file);\n  const code = file.code,\n        name = file.name,\n        exists = file.exists,\n        readonly = file.readonly;\n  const inputFileEl = useRef(null);\n\n  const remove = () => {\n    console.log('code', code);\n    onChange();\n  };\n\n  const upload = () => {\n    //console.log('upload', code, inputFileEl.current.files);\n    const files = inputFileEl.current.files; //        const formData = new FormData();\n    //\n    //        for (var i = 0; i < files.length; i++) {\n    //            formData.append(i, files.item(i));\n    //        }\n\n    resource.uploadContents(inputFileEl.current.files[0]);\n    onChange();\n  };\n\n  return React.createElement(Table.Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, React.createElement(Table.Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278\n    },\n    __self: this\n  }, exists && React.createElement(\"a\", {\n    href: resource.getDownloadLink(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279\n    },\n    __self: this\n  }, name), !exists && name), React.createElement(Table.Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: remove,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"trash\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285\n    },\n    __self: this\n  }), \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"), !readonly && React.createElement(\"input\", {\n    ref: inputFileEl,\n    type: \"file\",\n    name: \"file\",\n    onChange: upload,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  })));\n}\n\nexport default Dossier;","map":{"version":3,"sources":["/home/develop01/work/filedossier/filedossier-js/src/Dossier.js"],"names":["React","Suspense","useState","useEffect","useRef","Table","Button","Message","Loader","Icon","Dropdown","DefaultApi","DossierApi","DossierResource","useResource","xhtml","options","parser","DOMParser","list","parseFromString","getElementById","console","log","rows","querySelectorAll","i","length","cells","push","key","textContent","trim","text","value","Dossier","dossierKey","dossierPackage","dossierCode","dossierApi","dossierResource","getDossier","dossier","loading","error","name","valid","dossierFile","map","file","code","getDossierFileResource","booleanValue","someFunction","DossierFile","onChange","resource","exists","readonly","inputFileEl","remove","upload","files","current","uploadContents","getDownloadLink"],"mappings":"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","sourcesContent":["import React, { Suspense, useState, useEffect, useRef } from 'react';\nimport { Table, Button, Message, Loader, Icon, Dropdown } from 'semantic-ui-react';\nimport { DefaultApi as DossierApi} from '@ilb/filedossier-api/dist';\nimport DossierResource from './DossierResource';\nimport {useResource} from './ReactHelper';\n\nconst xhtml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1 plus calc//EN\" \"http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg-flat.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  <head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/oooxhtml/oooxhtml.css\"/>\n    <title></title>\n    <meta name=\"generator\" content=\"oooxhtml/1.2\"/>\n    <meta name=\"AppVersion\" content=\"12.0000\"/>\n    <meta name=\"Company\" content=\"БыстроБанк\"/>\n    <meta name=\"DocSecurity\" content=\"0\"/>\n    <meta name=\"HeadURL\" content=\"$HeadURL: https://svn.ilb.ru/repos/treasurydocs/trunk/doc/repo/data/issuancevolume.xhtml $\"/>\n    <meta name=\"HyperlinksChanged\" content=\"false\"/>\n    <meta name=\"LinksUpToDate\" content=\"false\"/>\n    <meta name=\"ScaleCrop\" content=\"false\"/>\n    <meta name=\"ShareDoc\" content=\"false\"/>\n  </head>\n  <body>\n    <div class=\"container spreadsheet\">\n      <table summary=\"Лист1\" id=\"list1\">\n        <colgroup>\n          <col style=\"min-width:30.23mm;\"/>\n          <col style=\"min-width:32.76mm;\"/>\n        </colgroup>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>Наименование</p>\n          </td>\n          <td style=\"font-size:11pt;\">\n            <p>Объем выпуска</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>КОБР-18</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>500000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>КОБР-17</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>500000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>КОБР-20</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>500000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>КОБР-19</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>500000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>КОБР-21</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>600000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>РСХБ БО-5Р</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>25000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>РН БАНК1Р3</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>5000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>ОФЗ 26223</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>350000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>ГТЛК 1P-13</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>10000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>ВЭБ 1P-16</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>20000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>ФолксвБ1P3</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>10000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>ТойотаБ1P2</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>3000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:5.29mm;\">\n          <td>\n            <p>ДОМ 1P-5R</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>10000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>ВЭБ.РФ 21</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>15000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>ВЭБ ПБО1Р2</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>15000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>ГПБ001P09P</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>15000000</p>\n          </td>\n        </tr>\n        <tr style=\"height:4.99mm;\">\n          <td>\n            <p>РН БАНК1Р5</p>\n          </td>\n          <td class=\"float\" style=\"font-size:11pt;\">\n            <p>8000000</p>\n          </td>\n        </tr>\n      </table>\n    </div>\n    <script type=\"text/javascript\" src=\"/privilegedAPI/web/scripts/privilegedAPI.js\"></script>\n    <script type=\"text/javascript\" src=\"/oooxhtml/oooxhtml.js\"></script>\n  </body>\n</html>\n`;\n\nconst options = [];\nconst parser = new DOMParser();\nconst list = parser.parseFromString(xhtml, \"application/xhtml+xml\").getElementById(\"list1\");\nconsole.log('list', list);\nconst rows = list.querySelectorAll('tr');\nconsole.log('rows', rows);\nfor (let i = 1; i < rows.length; i++) {\n  const cells = rows[i].querySelectorAll('td');\n  options.push({ key: cells[0].textContent.trim(), text: cells[0].textContent.trim(), value: cells[0].textContent.trim() });\n}\nconsole.log('options', options);\n\n\nfunction Dossier( { dossierKey, dossierPackage, dossierCode}) {\n    const dossierApi = new DossierApi();\n    const dossierResource = new DossierResource(dossierApi, {dossierKey, dossierPackage, dossierCode});\n\n    const [dossier, getDossier] = useResource(() => dossierResource.getDossier());\n\n    useEffect(() => {\n        getDossier();\n\n    }, [dossierKey, dossierPackage, dossierCode]);\n    console.log('dossier.value', dossier.value);\n    return (\n            <div className=\"fileDosser\">\n            <Dropdown options={options}/>\n                {dossier.loading && <Loader active /> }\n                {dossier.error && <Message error visible content={dossier.error}/> }\n                {dossier.value && <div>\n                    Name: {dossier.value.name}\n                    {!dossier.value.valid && <Message negative>\n                        <p>Валидность: {dossier.value.valid}</p>\n                        </Message>}\n                    {dossier.value.dossierFile &&\n                                    <Table celled>\n                                        <Table.Header>\n                                            <Table.Row>\n                                                <Table.HeaderCell>Файл</Table.HeaderCell>\n                                                <Table.HeaderCell>Действие</Table.HeaderCell>\n                                            </Table.Row>\n                                        </Table.Header>\n\n                                        <Table.Body>\n                                            {dossier.value.dossierFile.map(file => (\n                                                                        <DossierFile\n                                                                            key={file.code}\n                                                                            file={file}\n                                                                            onChange={getDossier}\n                                                                            resource={dossierResource.getDossierFileResource(file.code)}\n                                                                            />\n                                                            ))}\n                                        </Table.Body>\n                                    </Table>\n                    }\n                </div>}\n            </div>\n            );\n}\n\nvar booleanValue = 1;\n\nfunction someFunction(){\n    if(booleanValue === 1){\n        return 2;\n    }\n}\n\nfunction DossierFile({ file, onChange, resource }) {\n    console.log('file', file);\n    const { code, name, exists, readonly } = file;\n    const inputFileEl = useRef(null);\n\n    const remove = () => {\n        console.log('code', code);\n        onChange();\n    };\n\n    const upload = () => {\n        //console.log('upload', code, inputFileEl.current.files);\n        const files = inputFileEl.current.files;\n\n//        const formData = new FormData();\n//\n//        for (var i = 0; i < files.length; i++) {\n//            formData.append(i, files.item(i));\n//        }\n\n        resource.uploadContents(inputFileEl.current.files[0]);\n        onChange();\n    };\n\n\n    return (\n            <Table.Row>\n                <Table.Cell>\n                {exists && <a href={resource.getDownloadLink()}>{name}</a>}\n                {!exists && name }              \n                </Table.Cell>\n                <Table.Cell>\n\t\t<Button onClick={remove}>\n\t\t\n\t\t    <Icon name='trash'/>\n\t\tУдалить\n\t\t\n\t\t    </Button>\n                    {!readonly && <input ref={inputFileEl} type=\"file\" name=\"file\" onChange={upload}/>}\n\n                </Table.Cell>\n            </Table.Row>\n            );\n}\n\nexport default Dossier;"]},"metadata":{},"sourceType":"module"}